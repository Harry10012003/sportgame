<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coach Slim ‚Äì Demo (No-CDN)</title>
  <style>
    :root{
      --bg:#0f172a; --panel:#0b1220; --muted:#111827; --text:#e5e7eb;
      --primary:#22c55e; --accent:#38bdf8; --ring:#14b8a6; --danger:#ef4444;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:radial-gradient(1000px 600px at 20% 0%, rgba(56,189,248,0.1), transparent 60%),
                    radial-gradient(1000px 800px at 120% 20%, rgba(34,197,94,0.12), transparent 60%), var(--bg);
         color:var(--text);font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:16px}
    .title{display:flex;align-items:center;gap:10px;font-weight:700;font-size:22px}
    .badge{background:rgba(34,197,94,0.15);color:#bbf7d0;border:1px solid rgba(34,197,94,0.4);padding:2px 8px;border-radius:999px;font-size:12px}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .card{background:rgba(11,18,32,0.8);border:1px solid rgba(148,163,184,0.15);border-radius:16px;backdrop-filter: blur(8px)}
    .card h3{margin:0;padding:16px 16px 0 16px;font-size:16px}
    .card .content{padding:16px}
    .row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    label{font-size:12px;opacity:.9}
    input, select, button{
      background:var(--muted); color:var(--text); border:1px solid rgba(148,163,184,0.2);
      border-radius:10px; padding:10px 12px; font-size:14px; outline:none;
    }
    input:focus, select:focus, button:focus{box-shadow:0 0 0 3px rgba(20,184,166,0.45);border-color:var(--ring)}
    button{cursor:pointer;transition:transform .03s ease, opacity .15s ease}
    button.primary{background:linear-gradient(135deg, var(--primary), #16a34a); border:none; font-weight:600}
    button.secondary{background:linear-gradient(135deg, #1f2937, #111827);}
    button.ghost{background:transparent;border:1px dashed rgba(148,163,184,0.25)}
    button:disabled{opacity:.6;cursor:not-allowed}
    .hint{font-size:12px;opacity:.7}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{background:rgba(56,189,248,0.15);border:1px solid rgba(56,189,248,0.4);padding:4px 10px;border-radius:999px;font-size:12px}
    .ring-wrap{position:relative;display:inline-block}
    .ring{transform:rotate(-90deg)}
    .ring-center{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column}
    .percent{font-weight:800;font-size:26px}
    .muted{opacity:.7;font-size:12px}
    .toasts{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:10px;z-index:9999}
    .toast{background:#0b1220;border:1px solid rgba(148,163,184,0.2);border-radius:14px;padding:12px 14px;min-width:240px;box-shadow:0 10px 30px rgba(0,0,0,0.35)}
    .toast h4{margin:0 0 4px 0;font-size:14px}
    .toast p{margin:0;font-size:13px;opacity:.95}
    .footer{margin-top:20px;text-align:center;opacity:.75;font-size:12px}
    .icon{display:inline-block;width:20px;height:20px;border-radius:6px;background:linear-gradient(135deg,var(--accent),#60a5fa);margin-right:8px}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">
        <span class="icon"></span><span>Coach Slim ‚Äì Demo web ch·∫°y th·ª≠ (No‚ÄëCDN)</span>
        <span class="badge">MVP</span>
      </div>
      <div class="row">
        <div>
          <label>Gi·ªçng ƒëi·ªáu</label><br/>
          <select id="tone">
            <option value="gentle">Nh·∫π nh√†ng</option>
            <option value="playful" selected>Vui t√≠nh</option>
            <option value="roasty">C√† kh·ªãa nh·∫π</option>
          </select>
        </div>
        <div>
          <label>T√™n g·ªçi</label><br/>
          <input id="name" value="B·∫°n ƒë·∫πp" placeholder="T√™n c·ªßa b·∫°n">
        </div>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h3>üèÉ‚Äç‚ôÄÔ∏è T·∫≠p nhanh</h3>
        <div class="content">
          <div class="row">
            <label>Th·ªùi l∆∞·ª£ng (ph√∫t)</label>
            <select id="mins">
              <option value="1">1</option>
              <option value="2" selected>2</option>
              <option value="5">5</option>
            </select>
            <span class="hint">*Demo: 1 ph√∫t = 10 gi√¢y</span>
          </div>
          <div style="display:flex;justify-content:center;padding:12px 0">
            <div style="position:relative">
              <div class="ring-wrap">
                <svg id="ring" width="140" height="140" class="ring">
                  <circle cx="70" cy="70" r="54" stroke-width="10" stroke="rgba(148,163,184,0.25)" fill="none"></circle>
                  <circle id="ringBar" cx="70" cy="70" r="54" stroke-width="10" stroke-linecap="round" fill="none"></circle>
                  <defs>
                    <linearGradient id="grad" x1="0" y1="0" x2="1" y2="1">
                      <stop offset="0%" stop-color="#38bdf8"/>
                      <stop offset="100%" stop-color="#22c55e"/>
                    </linearGradient>
                  </defs>
                </svg>
              </div>
              <div class="ring-center">
                <div id="percent" class="percent">0%</div>
                <div class="muted">ti·∫øn ƒë·ªô</div>
              </div>
            </div>
          </div>
          <div class="row">
            <button id="btnStart" class="primary">‚ñ∂ Ch·∫°y ƒëi!</button>
            <button id="btnNotifyWorkout" class="secondary">üîî Th·ª≠ noti t·∫≠p</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>üîî Nh·∫Øc nhanh</h3>
        <div class="content">
          <div class="row" style="flex-direction:column;align-items:stretch;gap:8px">
            <button id="btnLunch" class="secondary">üç± T·ªõi gi·ªù ƒÉn tr∆∞a (1 ch√©n c∆°m)</button>
            <button id="btnWater" class="secondary">ü•§ U·ªëng n∆∞·ªõc 1 ly</button>
            <button id="btnPlateau" class="secondary">‚öñÔ∏è C√¢n kh√¥ng gi·∫£m ‚Äì ch·ªçc vui</button>
          </div>
          <div class="hint" style="margin-top:8px">ƒê√¢y l√† demo tr√™n web ‚Äì th√¥ng b√°o d·∫°ng toast trong trang (kh√¥ng c·∫ßn quy·ªÅn push).</div>
        </div>
      </div>

      <div class="card">
        <h3>‚öñÔ∏è C√¢n n·∫∑ng</h3>
        <div class="content">
          <div class="row">
            <input id="weighInput" placeholder="Nh·∫≠p c√¢n (kg)" style="width:140px">
            <button id="btnSaveWeigh">L∆∞u</button>
          </div>
          <div style="margin-top:10px">
            <div class="hint" style="margin-bottom:6px">L·ªãch s·ª≠ g·∫ßn ƒë√¢y</div>
            <div id="chips" class="chips"><span class="hint">Ch∆∞a c√≥ d·ªØ li·ªáu</span></div>
          </div>
        </div>
      </div>

      <div class="card" style="grid-column:1/-1">
        <h3>üåô Ng·ªß s·ªõm & m·∫πo nhanh</h3>
        <div class="content" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px">
          <div class="content" style="background:rgba(2,6,23,0.35);border-radius:12px;border:1px solid rgba(148,163,184,0.12)">
            <div class="row" style="justify-content:space-between"><b>Ng·ªß tr∆∞·ªõc 23:00</b></div>
            <div>Ng·ªß ƒë·ªß gi√∫p gi·∫£m th√®m ƒÉn khuya v√† ph·ª•c h·ªìi sau t·∫≠p.</div>
            <div style="margin-top:8px"><button class="ghost" id="btnSleep">Th·ª≠ noti ng·ªß</button></div>
          </div>
          <div class="content" style="background:rgba(2,6,23,0.35);border-radius:12px;border:1px solid rgba(148,163,184,0.12)">
            <div class="row" style="justify-content:space-between"><b>B·ªØa x·∫ø l√†nh m·∫°nh</b></div>
            <div>Tr√°i c√¢y nguy√™n qu·∫£ ho·∫∑c s·ªØa chua kh√¥ng ƒë∆∞·ªùng nh√©.</div>
            <div style="margin-top:8px"><button class="ghost" id="btnSnack">Th·ª≠ noti snack</button></div>
          </div>
          <div class="content" style="background:rgba(2,6,23,0.35);border-radius:12px;border:1px solid rgba(148,163,184,0.12)">
            <div class="row" style="justify-content:space-between"><b>ƒêi b·ªô sau ƒÉn</b></div>
            <div>10‚Äô ƒëi b·ªô nh·∫π gi√∫p ti√™u nƒÉng l∆∞·ª£ng v√† kho·∫ª ti√™u ho√°.</div>
            <div style="margin-top:8px"><button class="ghost" id="btnWalk">Th·ª≠ noti ƒëi b·ªô</button></div>
          </div>
        </div>
      </div>
    </div>

    <div class="toasts" id="toasts"></div>
    <div class="footer">¬© 2025 Coach Slim ‚Äì Demo (Vanilla JS). Gi·ªçng ƒëi·ªáu t√¥n tr·ªçng, vui nh·ªôn, c√≥ tu·ª≥ ch·ªçn ‚Äúc√† kh·ªãa nh·∫π‚Äù.</div>
  </div>

  <script>
    const MESSAGES = {
      lunch:{gentle:[ "ƒê·∫øn gi·ªù ƒÉn tr∆∞a r·ªìi n√®. Nh·ªõ 1 ch√©n c∆°m th√¥i nh√©!","ƒê√£ t·ªõi b·ªØa tr∆∞a. M·ªôt ch√©n c∆°m + nhi·ªÅu rau cho nh·∫π b·ª•ng nha!"],
             playful:["B·ª•ng k√™u ch∆∞a? Tr∆∞a nay 1 ch√©n c∆°m + rau ƒë·∫ßy t√¥, ƒÉn xong ƒë·∫πp li·ªÅn!","Tr∆∞a t·ªõi r·ªìi! Ch√©n c∆°m g·ªçi t√™n b·∫°n ‚Äî ƒÉn g·ªçn nh·∫π cho vui b·ª•ng nh√© üòå"],
             roasty:[ "T·ªõi gi·ªù ƒÉn tr∆∞a. 1 ch√©n c∆°m th√¥i nha, ƒë·ª´ng ƒë·ªÉ ch√©n th·ª© 2 r·ªß r√™ üòú","ƒÇn tr∆∞a n√®! L·ª° x√∫c ch√©n th·ª© 2 l√† c√¢n c∆∞·ªùi b·∫°n ƒë√≥ nha üôÉ"]},
      water:{gentle:["U·ªëng 1 ly n∆∞·ªõc cho t·ªânh t√°o nh√©!"],
             playful:["Cheers n√®! U·ªëng 1 ly n∆∞·ªõc cho da m∆∞·ªõt eo thon!"],
             roasty:["U·ªëng n∆∞·ªõc ƒëi ch·ª© kh√¥ng m·ª° n√≥ kh√¥ l·∫°i kh√≥ ƒë·ªët l·∫Øm √° üòÖ"]},
      workout:{gentle:["ƒê·∫øn gi·ªù t·∫≠p r·ªìi, m√¨nh v·∫≠n ƒë·ªông {mins}‚Äô cho kho·∫ª ng∆∞·ªùi nha!"],
               playful:["Chu√¥ng r√©o! {mins}‚Äô ch·∫°y ƒëi‚Ä¶ ch·∫°y ƒëi üèÉ‚Äç‚ôÄÔ∏è xong kho·∫ª li·ªÅn!"],
               roasty:["{mins}‚Äô t·∫≠p li·ªÅn! Kh√¥ng t·∫≠p l√† m·ª° n√≥ ch·∫°y t·ªõi √¥m ƒë√≥!"]},
      plateau:{gentle:["S·ªë c√¢n ƒëang ngh·ªâ l·ªÖ t√≠ th√¥i. Th·ª≠ ƒëi b·ªô th√™m 10‚Äô nh√©?"],
               playful:["Kim c√¢n h∆°i l·ª≥ nha! Th√™m 10‚Äô ƒëi b·ªô sau ƒÉn t·ªëi coi n√†o."],
               roasty:["V·∫´n c√≤n m·∫≠p qu√° r·ªìi üòÖ coi ch·ª´ng √™ s·∫Øc ƒë√≥ nha! Th√™m 10‚Äô ch·∫°y ch·ªó ƒëi!"]},
      success:{gentle:["Tuy·ªát v·ªùi! C√¢n ƒë√£ nh√≠ch xu·ªëng r·ªìi ‚ú®"],
               playful:["Qu√° ƒë√£aa! C√¢n h·∫°, mood l√™n üéâ"],
               roasty:["Th·∫•y ch∆∞a! Ch√∫t x√≠u c·ªë l√† c√¢n s·ª£ b·∫°n li·ªÅn üòé"]},
    };
    const pick = (arr)=>arr[Math.floor(Math.random()*arr.length)];
    const fmtWorkout = (tone, mins)=> pick(MESSAGES.workout[tone]).replace("{mins}", String(mins));

    const toasts = document.getElementById('toasts');
    function pushToast(title, description){
      const wrap = document.createElement('div');
      wrap.className = 'toast';
      wrap.innerHTML = `<h4>${title}</h4><p>${description}</p>`;
      toasts.appendChild(wrap);
      setTimeout(()=>{
        wrap.style.opacity = '0';
        wrap.style.transform = 'translateY(10px)';
        setTimeout(()=>wrap.remove(), 300);
      }, 3400);
    }

    const toneEl = document.getElementById('tone');
    const minsEl = document.getElementById('mins');
    const btnStart = document.getElementById('btnStart');
    const btnNotifyWorkout = document.getElementById('btnNotifyWorkout');
    const btnLunch = document.getElementById('btnLunch');
    const btnWater = document.getElementById('btnWater');
    const btnPlateau = document.getElementById('btnPlateau');
    const weighInput = document.getElementById('weighInput');
    const btnSaveWeigh = document.getElementById('btnSaveWeigh');
    const chips = document.getElementById('chips');
    const ringBar = document.getElementById('ringBar');
    const percent = document.getElementById('percent');

    const radius = 54, perim = 2*Math.PI*radius;
    ringBar.setAttribute('stroke', 'url(#grad)');
    ringBar.setAttribute('stroke-dasharray', `0 ${perim}`);
    function setProgress(p){
      const nom = (p/100)*perim;
      ringBar.setAttribute('stroke-dasharray', `${nom} ${perim}`);
      percent.textContent = Math.round(p) + '%';
    }

    let active = false, secs = 0, timerId = null;
    function startWorkout(){
      if(active) return;
      const mins = parseInt(minsEl.value,10) || 1;
      secs = mins*10;
      active = true;
      btnStart.disabled = true;
      pushToast('B·∫Øt ƒë·∫ßu t·∫≠p', fmtWorkout(toneEl.value, mins));
      setProgress(0);
      timerId = setInterval(()=>{
        secs -= 1;
        const total = mins*10;
        const done = total - secs;
        const p = Math.max(0, Math.min(100, Math.round((done/total)*100)));
        setProgress(p);
        if(secs<=0){
          clearInterval(timerId);
          active = false;
          btnStart.disabled = false;
          setProgress(100);
          pushToast('Xong bu·ªïi t·∫≠p!', pick(MESSAGES.success[toneEl.value]));
        }
      }, 1000);
    }

    function notify(type){
      const tone = toneEl.value;
      const mins = parseInt(minsEl.value,10) || 1;
      const titleMap = {lunch:'T·ªõi gi·ªù ƒÉn tr∆∞a', water:'U·ªëng n∆∞·ªõc', workout:'T·∫≠p luy·ªán', plateau:'Nh·∫Øc nh·∫π', success:'Ho√†n th√†nh'};
      let desc = '';
      if(type==='workout') desc = fmtWorkout(tone, mins);
      else desc = pick(MESSAGES[type][tone]);
      pushToast(titleMap[type] || 'Th√¥ng b√°o', desc);
    }

    const weights = [];
    function renderWeights(){
      chips.innerHTML='';
      if(weights.length===0){ chips.innerHTML = '<span class="hint">Ch∆∞a c√≥ d·ªØ li·ªáu</span>'; return; }
      for(const w of weights){
        const span = document.createElement('span');
        span.className='chip';
        span.textContent = w.toFixed(1)+' kg';
        chips.appendChild(span);
      }
    }
    function addWeigh(){
      const v = parseFloat(weighInput.value);
      if(isNaN(v)) return;
      weights.push(v);
      while(weights.length>7) weights.shift();
      weighInput.value='';
      renderWeights();
      if(weights.length>=4){
        const r = weights.slice(-4);
        const diff = r[r.length-1]-r[0];
        if(diff >= -0.1) notify('plateau');
        else notify('success');
      }else{
        pushToast('ƒê√£ l∆∞u c√¢n n·∫∑ng','Ti·∫øp t·ª•c theo d√µi nha!');
      }
    }

    btnStart.addEventListener('click', startWorkout);
    btnNotifyWorkout.addEventListener('click', ()=>notify('workout'));
    btnLunch.addEventListener('click', ()=>notify('lunch'));
    btnWater.addEventListener('click', ()=>notify('water'));
    btnPlateau.addEventListener('click', ()=>notify('plateau'));
    btnSaveWeigh.addEventListener('click', addWeigh);
    document.getElementById('btnSleep').addEventListener('click', ()=>pushToast('ƒêi ng·ªß s·ªõm','ƒê√®n ng·ªß g·ªçi t√™n b·∫°n n√®. Tr∆∞·ªõc 23:00 nha!'));
    document.getElementById('btnSnack').addEventListener('click', ()=>pushToast('Snack nh·∫π','·ªîi/t√°o/b∆∞·ªüi ‚Äì ngon l√†nh m√† v·∫´n gi·ªØ d√°ng!'));
    document.getElementById('btnWalk').addEventListener('click', ()=>pushToast('ƒêi b·ªô 10‚Äô','ƒê·ª©ng d·∫≠y ƒëi d·∫°o cho m√°t, ti√™u b·ªõt ‚Äòthu·∫ø‚Äô b·ªØa tr∆∞a n√®!'));
    setProgress(0); renderWeights();
  </script>
</body>
</html>
